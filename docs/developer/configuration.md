# Auxin Configuration Reference

**Last Updated**: 2025-11-20
**Purpose**: Complete reference for configuration files, environment variables, and settings

---

## Overview

Auxin uses a layered configuration system:

1. **Project config** (`.auxin/config.toml`) - Per-project settings
2. **User config** (`~/.auxin/config.toml`) - User-wide defaults
3. **Environment variables** - Runtime overrides

Settings are applied in order: project > user > environment > defaults.

---

## Configuration Files

### Project Configuration

Located at: `<project>/.auxin/config.toml`

```toml
# .auxin/config.toml

[project]
# Project type (auto-detected on init)
type = "logicpro"  # logicpro, sketchup, blender

# Project name (defaults to directory name)
name = "My Project"

[draft]
# Auto-commit settings for background daemon
enabled = true
interval_seconds = 60
branch_name = "drafts"

[lock]
# Default lock timeout in hours
default_timeout_hours = 4

# Heartbeat interval in minutes (keeps lock alive)
heartbeat_interval_minutes = 10

# Auto-release after missed heartbeats
auto_release_after_missed = 3

[remote]
# Oxen Hub remote URL
url = "https://hub.oxen.ai"

# Repository namespace (username or organization)
namespace = "myteam"

# Repository name
repository = "my-project"

[server]
# Auxin server URL (for self-hosted collaboration)
url = "http://localhost:3000"

# Use server for lock management
use_for_locks = false

# Use server for metadata storage
use_for_metadata = false

# Request timeout in seconds
timeout_seconds = 30

# Default namespace
namespace = "default"

[hooks]
# Enable pre-commit hooks
pre_commit_enabled = true

# Enable post-commit hooks
post_commit_enabled = true

# Hook timeout in seconds
timeout_seconds = 30
```

---

### User Configuration

Located at: `~/.auxin/config.toml`

```toml
# ~/.auxin/config.toml

[user]
# Default author name for commits
name = "Your Name"

# Default email for commits
email = "you@example.com"

[defaults]
# Default BPM for new Logic Pro commits
bpm = 120

# Default sample rate for new Logic Pro commits
sample_rate = 48000

# Default units for new SketchUp commits
units = "Feet"

[ui]
# Enable colored output
colored = true

# Show progress bars for long operations
progress_bars = true

# Verbose output by default
verbose = false

[network]
# Maximum retry attempts for network operations
max_retries = 4

# Base retry delay in milliseconds
retry_delay_ms = 2000

# Connection timeout in seconds
timeout_seconds = 30

[daemon]
# Log file location
log_path = "/tmp/com.auxin.daemon.stdout"

# Error log location
error_log_path = "/tmp/com.auxin.daemon.stderr"
```

---

## Environment Variables

### Core Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `AUXIN_CONFIG` | User config file path | `~/.auxin/config.toml` |
| `AUXIN_LOG_LEVEL` | Log level | `info` |
| `AUXIN_NO_COLOR` | Disable colored output | `false` |

### Logging

| Variable | Description | Default |
|----------|-------------|---------|
| `AUXIN_LOG_LEVEL` | `debug`, `info`, `warn`, `error` | `info` |
| `RUST_LOG` | Rust log filter (e.g., `auxin=debug`) | - |

### Authentication

| Variable | Description | Default |
|----------|-------------|---------|
| `OXEN_AUTH_TOKEN` | Oxen Hub auth token | (keychain) |
| `OXEN_HOST` | Oxen Hub URL | `https://hub.oxen.ai` |

### Network

| Variable | Description | Default |
|----------|-------------|---------|
| `AUXIN_NETWORK_TIMEOUT` | Request timeout (seconds) | `30` |
| `AUXIN_MAX_RETRIES` | Max retry attempts | `4` |
| `AUXIN_OFFLINE_MODE` | Force offline mode | `false` |

### Server

| Variable | Description | Default |
|----------|-------------|---------|
| `AUXIN_SERVER_URL` | Auxin server URL | (from config) |
| `AUXIN_SERVER_NAMESPACE` | Default namespace | `default` |

---

## .oxenignore Patterns

Auxin auto-generates `.oxenignore` files based on project type.

### Logic Pro Patterns

```gitignore
# Auto-generated by Auxin for Logic Pro projects

# Temporary and cache files
*.nosync
*~
.DS_Store

# Freeze files (can be regenerated)
Freeze Files/

# Bounces directory (managed separately)
Bounces/

# Undo history
Undo Data/

# Plugin scan caches
PluginScan/

# Backup files
*.backup
*.bak

# Analysis files
Analyzed Files/
```

### SketchUp Patterns

```gitignore
# Auto-generated by Auxin for SketchUp projects

# Temporary files
*.tmp
*~
.DS_Store

# Backup files
*.skb

# Thumbnail cache
Thumbnails/

# Autosave files
AutoSave/

# Layout reference files
*.layout~
```

### Blender Patterns

```gitignore
# Auto-generated by Auxin for Blender projects

# Temporary files
*.blend1
*.blend2
*~
.DS_Store

# Crash backups
crash_report/

# Thumbnail cache
.blender_thumbnails/
```

---

## LaunchAgent Configuration

The daemon is configured via a plist file.

**Location**: `~/Library/LaunchAgents/com.auxin.daemon.plist`

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.auxin.daemon</string>

    <key>ProgramArguments</key>
    <array>
        <string>/usr/local/bin/auxin-daemon</string>
        <string>--daemon</string>
    </array>

    <key>RunAtLoad</key>
    <true/>

    <key>KeepAlive</key>
    <true/>

    <key>StandardOutPath</key>
    <string>/tmp/com.auxin.daemon.stdout</string>

    <key>StandardErrorPath</key>
    <string>/tmp/com.auxin.daemon.stderr</string>

    <key>UserName</key>
    <string><!-- Set during installation --></string>
</dict>
</plist>
```

---

## Network Resilience Settings

### Retry Policy

```toml
[network.retry]
# Maximum retry attempts
max_attempts = 4

# Base delay (doubles each attempt)
base_delay_ms = 2000

# Maximum delay cap
max_delay_ms = 16000

# Jitter factor (0.0 - 1.0)
jitter = 0.1
```

### Circuit Breaker

```toml
[network.circuit_breaker]
# Failures before circuit opens
failure_threshold = 5

# Time before retry after opening
reset_timeout_seconds = 60

# Success needed to close circuit
success_threshold = 3
```

### Offline Queue

```toml
[network.offline]
# Queue file location
queue_path = ".auxin/offline_queue.json"

# Maximum queued operations
max_queue_size = 100

# Auto-sync when online
auto_sync = true
```

---

## Metadata Storage

Commit metadata is stored in the commit message using YAML frontmatter:

```yaml
---
auxin_metadata:
  project_type: logicpro
  bpm: 120.0
  sample_rate: 48000
  key_signature: "A Minor"
  tags:
    - mixing
    - vocals
  bounce:
    filename: "Mix_v1.wav"
    format: "wav"
    duration_seconds: 180.5
---

Added vocal harmonies and adjusted levels
```

---

## Common Configuration Patterns

### Studio Setup (Multiple Projects)

```toml
# ~/.auxin/config.toml

[defaults]
bpm = 120
sample_rate = 48000

[network]
max_retries = 6  # Unreliable connection

[daemon]
log_path = "~/Library/Logs/Auxin/daemon.log"
```

### Team Collaboration

```toml
# .auxin/config.toml

[lock]
default_timeout_hours = 8  # Long sessions
heartbeat_interval_minutes = 5

[remote]
namespace = "our-team"

[server]
url = "http://team-server:3000"
use_for_locks = true
```

### Solo Artist (Simple Setup)

```toml
# .auxin/config.toml

[lock]
default_timeout_hours = 24  # No contention

[draft]
interval_seconds = 120  # Less frequent auto-commits
```

---

## Validating Configuration

Check configuration is valid:

```bash
# Show current configuration
auxin config show

# Validate configuration files
auxin config validate

# Show effective configuration (merged)
auxin config effective
```

---

*Last Updated: 2025-11-20*
